<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FarmEasy Voice Chatbot</title>
    <style>
        body {
    font-family: Arial, sans-serif;
    background-color: #e0f7fa;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}

.chat-container {
    background: white;
    width: 800px;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    text-align: center;
    position: relative;
}

.chat-container::before {
    content: "FarmEasy Voice Chatbot";
    font-size: 20px;
    font-weight: bold;
    display: block;
    margin-bottom: 15px;
    color: #333;
}

.chat-box {
    height: 400px;
    overflow-y: auto;
    border: 1px solid #ccc;
    padding: 10px;
    border-radius: 5px;
    background: #fff;
    margin-bottom: 10px;
    box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
}

#language-select {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background: #f8f9fa;
    font-size: 14px;
}

#voice-btn {
    background-color: #28a745;
    color: white;
    border: none;
    padding: 12px 15px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 5px;
    width: 100%;
    font-weight: bold;
    transition: background 0.3s;
}

#voice-btn:hover {
    background-color: #218838;
}

    </style>
</head>
<body>

    <div class="chat-container">
        <div class="chat-box" id="chat-box"></div>
        <select id="language-select">
            <option value="en-US">English</option>
            <option value="hi-IN">рд╣рд┐рдиреНрджреА</option>
            <option value="ta-IN">родрооро┐ро┤рпН</option>
            <option value="te-IN">р░др▒Жр░▓р▒Бр░Чр▒Б</option>
            <option value="mr-IN">рдорд░рд╛рдареА</option>
        </select>
        <button id="voice-btn">ЁЯОд Speak</button>
    </div>

    <script >
        const chatBox = document.getElementById("chat-box");
const voiceBtn = document.getElementById("voice-btn");
const languageSelect = document.getElementById("language-select");

const qaData = {
    "how to prevent pests in crops": {
        "en-US": "Use neem oil spray or organic pesticides.",
        "hi-IN": "рдиреАрдо рдХреЗ рддреЗрд▓ рдХрд╛ рдЫрд┐рдбрд╝рдХрд╛рд╡ рдХрд░реЗрдВ рдпрд╛ рдЬреИрд╡рд┐рдХ рдХреАрдЯрдирд╛рд╢рдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред",
        "ta-IN": "роирпАроорпН роОрогрпНрогрпЖропрпН родрпЖро│ро┐роХрпНроХро╡рпБроорпН роЕро▓рпНро▓родрпБ роЗропро▒рпНроХрпИ рокрпВроЪрпНроЪро┐роХрпКро▓рпНро▓ро┐роХро│рпИ рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН.",
        "te-IN": "р░ир░┐р░ор▒Нр░о р░ир▒Вр░ир▒Ж р░╕р▒Нр░кр▒Нр░░р▒З р░Ър▒Зр░пр░Вр░бр░┐ р░▓р▒Зр░жр░╛ р░╕р▒Зр░Вр░жр▒Нр░░р▒Ар░п р░кр▒Бр░░р▒Бр░Чр▒Бр░ор░Вр░жр▒Бр░▓р░ир▒Б р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░Вр░бр░┐.",
        "mr-IN": "рдиреАрдо рддреЗрд▓рд╛рдЪреА рдлрд╡рд╛рд░рдгреА рдХрд░рд╛ рдХрд┐рдВрд╡рд╛ рд╕реЗрдВрджреНрд░рд┐рдп рдХреАрдЯрдХрдирд╛рд╢рдХрд╛рдВрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рд╛."
    },
    "when is the right time to plant rice?": {
        "en-US": "The best time to plant rice is during the monsoon season, around June to July.",
        "hi-IN": "рдзрд╛рди рд▓рдЧрд╛рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╕рдордп рдорд╛рдирд╕реВрди рдХреЗ рдореМрд╕рдо рдХреЗ рджреМрд░рд╛рди рдЬреВрди рд╕реЗ рдЬреБрд▓рд╛рдИ рддрдХ рд╣реЛрддрд╛ рд╣реИред",
        "ta-IN": "рокропро┐ро░рпН роЪрпЛродройрпИ роЪрпЖропрпНропрпБроорпН роЪро┐ро▒роирпНрод роирпЗро░роорпН рооро┤рпИ рокро░рпБро╡родрпНродро┐ро▓рпН, роЬрпВройрпН - роЬрпВро▓рпИ рооро╛родроЩрпНроХро│ро┐ро▓рпН.",
        "te-IN": "р░кр░Вр░Я р░╡р▒Зр░╕р▒З р░Йр░др▒Нр░др░о р░╕р░ор░пр░В рдорд╛рдирд╕р▒Вр░ир▒Н р░Хр░╛р░▓р░В, р░Ьр▒Вр░ир▒Н р░ир▒Бр░Вр░бр░┐ р░Ьр▒Бр░▓р▒И р░╡р░░р░Хр▒Б.",
        "mr-IN": "рдзрд╛рди рд▓рд╛рдЧрд╡рдбреАрд╕рд╛рдареА рд╕рд░реНрд╡реЛрддреНрддрдо рд╡реЗрд│ рдореЙрдиреНрд╕реВрди рд╣рдВрдЧрд╛рдорд╛рдордзреНрдпреЗ, рдЬреВрди рддреЗ рдЬреБрд▓реИ рджрд░рдореНрдпрд╛рди рдЖрд╣реЗ."
    },
    "what are the signs of good soil for farming?": {
        "en-US": "Good soil should be dark in color, crumbly, and well-drained.",
        "hi-IN": "рдЕрдЪреНрдЫреА рдорд┐рдЯреНрдЯреА рдХрд╛ рд░рдВрдЧ рдЧрд╣рд░рд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рд╡рд╣ рдЯреВрдЯрдиреЗ рдпреЛрдЧреНрдп рдФрд░ рдЬрд▓ рдирд┐рдХрд╛рд╕реА рд╡рд╛рд▓реА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред",
        "ta-IN": "роиро▓рпНро▓ роорогрпНрогро┐ройрпН роиро┐ро▒роорпН роХро░рпБроиро┐ро▒рооро╛роХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, роЕродрпБ роЙроЯрпИропродро╛роХро╡рпБроорпН, роирпАро░рпН ро╡роЯро┐роХроЯрпНроЯро┐ роХрпКро│рпНро│роХрпНроХрпВроЯро┐ропродро╛роХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.",
        "te-IN": "р░ор░Вр░Ър░┐ р░ор░Яр▒Нр░Яр░┐р░Хр░┐ р░Чр░╛р░в р░░р░Вр░Чр▒Б р░Йр░Вр░бр░╛р░▓р░┐, р░Ер░жр░┐ р░ор▒Бр░Хр▒Нр░Хр░▓р▒Б р░Хр░╛р░╡р░Ър▒Нр░Ър▒Б р░ор░░р░┐р░пр▒Б р░ир▒Ар░░р▒Б р░Хр░╛р░░р▒Бр░╕р▒Нр░др▒Бр░Вр░жр░┐.",
        "mr-IN": "рдЪрд╛рдВрдЧрд▓реА рдорд╛рддреА рдХрд╛рд│реНрдпрд╛ рд░рдВрдЧрд╛рдЪреА, рддреБрдЯрдгреНрдпрд╛рд╕ рд╕рдХреНрд╖рдо рдЖрдгрд┐ рдЪрд╛рдВрдЧрд▓реА рдЬрд▓ рдирд┐рдЪрд░рд╛ рдЕрд╕рд╛рд╡реА."
    },
    "how to improve crop yield?": {
        "en-US": "Use high-quality seeds, proper irrigation, and adequate fertilizers.",
        "hi-IN": "рдЙрдЪреНрдЪ рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд╛рд▓реЗ рдмреАрдЬреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдЙрдЪрд┐рдд рд╕рд┐рдВрдЪрд╛рдИ рдФрд░ рдЙрдЪрд┐рдд рдЙрд░реНрд╡рд░рдХреЛрдВ рдХрд╛ рдкреНрд░рдпреЛрдЧ рдХрд░реЗрдВред",
        "ta-IN": "роЙропро░рпН родро░рооро╛рой рокро░рпБро╡ рокропро┐ро░рпНроХро│рпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН, роЪро░ро┐ропро╛рой роирпАро░рпНрокрпНрокро╛роЪройроорпБроорпН, родрпЗро╡рпИропро╛рой роЙро░роЩрпНроХро│рпБроорпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН.",
        "te-IN": "р░Ор░ир▒Нр░ир▒Л р░ир░╛р░гр▒Нр░пр░ор▒Ир░и р░╡р░┐р░др▒Нр░др░ир░╛р░▓р▒Б р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░Вр░бр░┐, р░╕р░░р▒Ир░и р░ир▒Ар░░р░╛р░мр▒Нр░░р░др░▓р▒Б р░ор░░р░┐р░пр▒Б р░╕р░░р░┐р░кр▒Лр░пр▒З р░░р░╕р░╛р░пр░ир░╛р░▓р▒Б.",
        "mr-IN": "рдЙрдЪреНрдЪ рдЧреБрдгрд╡рддреНрддреЗрдЪреНрдпрд╛ рдмрд┐рдпрд╛рдгрд╛рдВрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рд╛, рдпреЛрдЧреНрдп рд╕рд┐рдВрдЪрди рдЖрдгрд┐ рдкреБрд░реЗрд╢реА рдЦрддрд╛рдВрдЪреА рд╡рд╛рдкрд░ рдХрд░рд╛."
    },
    "how can I get a loan for farming?": {
        "en-US": "You can get loans for farming from agricultural banks or government schemes.",
        "hi-IN": "рдЖрдк рдХреГрд╖рд┐ рдмреИрдВрдХреЛрдВ рдпрд╛ рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛рдУрдВ рд╕реЗ рдХреГрд╖рд┐ рдХреЗ рд▓рд┐рдП рдЛрдг рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВред",
        "ta-IN": "роирпАроЩрпНроХро│рпН ро╡рпЗро│ро╛рогрпНроорпИ ро╡роЩрпНроХро┐роХро│рпН роЕро▓рпНро▓родрпБ роЕро░роЪро┐ройрпН родро┐роЯрпНроЯроЩрпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ роХроЯройрпН рокрпЖро▒ роорпБроЯро┐ропрпБроорпН.",
        "te-IN": "р░ор▒Ар░░р▒Б р░╡р▒Нр░пр░╡р░╕р░╛р░пр░В р░Хр▒Лр░╕р░В р░мр▒Нр░пр░╛р░Вр░Хр▒Б р░▓р▒Зр░жр░╛ р░кр▒Нр░░р░нр▒Бр░др▒Нр░╡ р░кр░ер░Хр░╛р░▓ р░ир▒Бр░Вр░бр░┐ р░░р▒Бр░гр░В р░кр▒Кр░Вр░жр░╡р░Ър▒Нр░Ър▒Б.",
        "mr-IN": "рддреБрдореНрд╣реА рд╢реЗрддрдХрд▒реНрдпрд╛рдВрд╕рд╛рдареА рдмрдБрдХ рдХрд┐рдВрд╡рд╛ рд╕рд░рдХрд╛рд░реА рдпреЛрдЬрдирд╛рдВрдордзреВрди рдХрд░реНрдЬ рдорд┐рд│рд╡реВ рд╢рдХрддрд╛."
    }
};

// Check for browser support
function checkSpeechRecognition() {
    if (!('SpeechRecognition' in window || 'webkitSpeechRecognition' in window)) {
        chatBox.innerHTML += "<p><strong>Bot:</strong> Speech Recognition is not supported in this browser.</p>";
        voiceBtn.disabled = true;
        return false;
    }
    return true;
}

// Start listening to the user input
function startListening() {
    if (!checkSpeechRecognition()) return;

    let selectedLanguage = languageSelect.value;
    let recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = selectedLanguage;

    // Log to confirm that listening started
    console.log('Starting speech recognition...');
    
    recognition.start();

    recognition.onresult = function(event) {
        let userQuery = event.results[0][0].transcript.toLowerCase().trim();
        chatBox.innerHTML += <p><strong>You:</strong> ${userQuery}</p>;
        processQuery(userQuery, selectedLanguage);
    };

    recognition.onerror = function(event) {
        console.error('Speech recognition error:', event.error);
        chatBox.innerHTML += "<p><strong>Bot:</strong> There was an error with the voice input. Please try again.</p>";
    };

    recognition.onend = function() {
        console.log("Speech recognition ended.");
    };
}

// Process Query & Respond in the Same Language
function processQuery(query, lang) {
    let found = false;
    query = query.toLowerCase().trim();

    // Loop through the questions to match the query
    for (let question in qaData) {
        if (query.includes(question.toLowerCase())) {  
            let response = qaData[question][lang] || qaData[question]["en-US"];
            chatBox.innerHTML += <p><strong>Bot:</strong> ${response}</p>;
            speak(response, lang);
            found = true;
            break;
        }
    }

    if (!found) {
        let defaultResponse = {
            "en-US": "Sorry, I can only answer specific farming questions.",
            "hi-IN": "рдорд╛рдлрд╝ рдХреАрдЬрд┐рдП, рдореИрдВ рдХреЗрд╡рд▓ рдХреБрдЫ рдХреГрд╖рд┐ рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдЙрддреНрддрд░ рджреЗ рд╕рдХрддрд╛ рд╣реВрдБред",
            "ta-IN": "рооройрпНройро┐роХрпНроХро╡рпБроорпН, роиро╛ройрпН роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ ро╡ро┐ро╡роЪро╛роп роХрпЗро│рпНро╡ро┐роХро│рпБроХрпНроХрпЗ рокродро┐ро▓ро│ро┐роХрпНроХ роорпБроЯро┐ропрпБроорпН.",
            "te-IN": "р░Хр▒Нр░╖р░ор░┐р░Вр░Ър░Вр░бр░┐, р░ир▒Зр░ир▒Б р░Хр▒Зр░╡р░▓р░В р░Хр▒Кр░ир▒Нр░ир░┐ р░╡р▒Нр░пр░╡р░╕р░╛р░п р░кр▒Нр░░р░╢р▒Нр░ир░▓р░Хр▒Б р░ор░╛р░др▒Нр░░р░ор▒З р░╕р░ор░╛р░зр░╛р░ир░В р░Зр░╡р▒Нр░╡р░Чр░▓р░ир▒Б.",
            "mr-IN": "рдорд╛рдл рдХрд░рд╛, рдореА рдХреЗрд╡рд│ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╢реЗрддреАрд╢реА рд╕рдВрдмрдВрдзрд┐рдд рдкреНрд░рд╢реНрдирд╛рдВрдЪреА рдЙрддреНрддрд░реЗ рджреЗрдК рд╢рдХрддреЛ."
        };
        chatBox.innerHTML += <p><strong>Bot:</strong> ${defaultResponse[lang]}</p>;
        speak(defaultResponse[lang], lang);
    }
}

// Text-to-Speech (Voice Output)
function speak(text, lang) {
    let speech = new SpeechSynthesisUtterance(text);
    let voices = window.speechSynthesis.getVoices();
    let selectedVoice = null;

    // Select the voice based on the language
    for (let voice of voices) {
        if (voice.lang === lang) {
            selectedVoice = voice;
            break;
        }
    }

    if (selectedVoice) {
        speech.voice = selectedVoice;
    }

    speech.lang = lang;
    window.speechSynthesis.speak(speech);
}

// Start Listening on Button Click
voiceBtn.addEventListener("click", startListening);

    </script>

</body>
</html>